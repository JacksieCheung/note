# mysql小册

## 1. mysql 可执行文件

`mysqld`,`mysql_safe`,`mysql.server` 都是服务启动文件，最后的调用safe，safe调用第一个。server可以直接用命令行参数`start`启动，用`stop`关闭

客户端文件有`mysql`,`mysqldump`等，一般就用`mysql`打开客户端。

客户端有`-p -h -u`三个参数分别表示密码，地址和用户。密码和输入的密码必须无空格，后两个可有。还有`-P`表示端口，默认3306。

## 2. mysql 配置文件

## 3. 字符集

**字符集的概念：**

计算机只能存储二进制数`0`和`1`。要存储汉字、英文字母等特殊字符，需要对这些字符进行编码。

字符集就是一个用来描述某个**字符范围**和**编码规则**的抽象概念。

不同的字符集对同一个字符的编码方式也可能不一样。

**比较规则的概念：**

比较规则是用来给编码后的字符比较排序的。一般可以二进制比较，这样的比较区分大小写。别的比较也有统一转换为大写或者小写后进行二进制比较的，这样可以不区分大小写。除了英文字母外，还有许多别国语言的字母，这些也是需要特定的比较规则去排序的。

### 3.1 常用字符集：![来源](https://juejin.cn/book/6844733769996304392/section/6844733770042441741)

**ASCII字符集**

共收录128个字符，包括空格、标点符号、数字、大小写字母和一些不可见字符。由于总共才128个字符，所以可以使用1个字节来进行编码，我们看一些字符的编码方式。

**GBK字符集**

GBK字符集只是在收录字符范围上对GB2312字符集作了扩充，编码方式上兼容GB2312。

GB2312收录了汉字以及拉丁字母、希腊字母、日文平假名及片假名字母、俄语西里尔字母。其中收录汉字6763个，其他文字符号682个。同时这种字符集又兼容ASCII字符集。如果是ASCII里的字符，就采用1字节编码。如果不是，就采用2字节编码。

windows操作系统的编码字符集是GBK字符集。

**utf8字符集**

收录地球上能想到的所有字符，而且还在不断扩充。这种字符集兼容ASCII字符集，采用变长编码方式，编码一个字符需要使用1～4个字节。

utf8是类Unix操作系统的编码字符集。

### 3.2 mysql中的字符集

MySQL有四种**级别**的字符集和匹配规则。分别是：

* 服务器级别 `character_set_server` `collation_server`

* 数据库级别

* 表级别

* 列级别

四种字符集都可以手动通过命令修改。其中服务器级别可以通过配置文件或者命令行参数修改。数据库级别建库时可以指定(通过后面加上`CHARACTER SET (字符集名称)`和`COLLATE (比较规则名称)`来指定），没有指定就为数据库级别的字符集。表级别、列级别也是创建的时候指定，没有指定则为上一级的字符集。

后面三种的修改通过`alter`指令来

数据库和表类似，是`alter (数据库名/表名) CHARACTER SET (字符集名) COLLATE (比较规则名)`

列还要在表名后面加上`MODIFY (列名) (类型)` 相当于重新定义列。

注意列转换时不能超出字符集表示范围。

如果只改变四个级别中的字符集或者比较规则，那么另一个也会跟着变成相应的比较规则和默认字符集。

**两种utf8**

MySQL中的utf8字符集有两个版本：utf8mb3和utf8mb4 。前者是utf8的阉割版本，只用1-3个字节表示字符。后者是传统意义上的utf8，用1-4个字节表示字符（四个字节的情况：emoji表情）。MySQL为了节省内存空间，一般是默认使用前者。

**查看字符集**

`SHOW (CHARCTER SET|CHARSET) [LIKE 匹配模式]`

>代码块中，圆括号表示其中选一，中括号表示可选

**查看比较规则**

`SHOW COLLATION [LIKE 匹配模式]`

MySQL中一个字符集的匹配规则有很多种，其中有一个为默认比较规则。

比较规则的命名都是以对应的字符集名称开头，后面紧跟着作用于哪种语言，最后后缀表示具体规则。

举个例子：

`utf8_general_ci` 就是通用的比较规则，ci结尾表示不区分大小写。

**字符集转换**




