## 操作系统作业调度算法

> 操作系统等作业调度算法主要有先来先服务、短作业优先、最高响应比优先、基于优先数调度、均衡调度5种

### 先来先服务算法(FCFS: first come first serve)

就是按照各个作业进入系统（输入井）的自然次序来调度作业。

* 优点

  实现简单、公平

* 缺点

  没有考虑系统中各种资源的综合使用情况。往往用户不满意，因为短作业等待处理的时间可能比实际运行时间长的多。

### 短作业优先算法(SJF: shortest job first)

就是优先调度并处理短作业。这里短作业指的是作业运行时间短。

这里调度的标准，是计算机不能得到的。因为作业都还没开始投入运行，所以这个时间点长短只能由用户提供。

* 优点

  如果作业都是同时到达的，那么短作业优先算法优先调度算法可以使所有作业的平均周转时间最短。

* 缺点

  用户可能欺骗系统。本来要一个小时才能完成的作业，用户填个20秒，就会严重拖长所有作业的平均周转。

  不过此时系统还是能查出来问题的。如果一个作业写着20s完成，结果20s后没完成，那么系统就能知道。此时就需要一些惩罚措施。比如说无限期地推迟这个工作。活着直接把这个作业踢出系统。

  还可能导致长作业用户不满。

### 最高响应比优先算法(HRN: highest response ratio next)

先来先服务算法可能导致短作业用户不满。最短最优先算法可能导致长作业用户不满。为了克服上述两种算法的缺点，提出了**最高响应比优先算法**。

一个作业的**最高响应比**定义：

R = 作业周转时间/作业处理时间 

​    = （ 作业处理时间 + 作业等待时间 ）/ 作业处理时间

​    = 1 + 作业等待时间 / 作业处理时间

可以看出，R 和 作业等待时间成正比，和作业处理时间成反比。

作业等待时间初始化为0，作业处理时间由用户提供。这样刚运行的时候是按照最短最优先来的。但是在下次作业调度的时候，也能兼顾等待时间长的作业。做到两者兼顾。

### 基于优先数调度算法(HPF: highest priority first)

这种算法为每一个作业规定一个表示该作业优先级的整数，当需要将新的作业由输入井调入内存处理的时候，优先选择优先数最高的作业。

确定优先数有以下两种方法：

* 用户规定优先数

  又叫外部优先数。每个用户提交作业的时候提交优先数说明，写在jcb里面。系统操作完全依照这个优先数说明。也就是说系统作业顺序完全是由用户决定的。这种方法很可能导致低优先级作业无限等待的饥饿状态。

* 系统计算优先数

  又叫内部优先数。系统根据作业本身的紧迫程度、作业所需要的处理时间、作业再输入井中的等待时间、作业的最迟完成时间、作业的资源需求情况等信息，通过计算得到一个优先数。

这种算法 可以分一个队列，从优先级高到低排列。

也可以用多个队列，分别表示不同级别的优先度。同优先度的队列按照先来先服务的策略调度。

当高优先级队列为空时，再扫描低优先级队列。

### 均衡调度算法

又叫分类排队算法。该算法根据系统运行情况和作业属性将作业分类，作业调度时轮流从这些不同的作业类中挑选作业。目标是力求均衡地利用各种系统资源，发挥资源的使用效率，又力求使用户满意。

具体实现中，可将输入井中待处理的作业分成若干个队列。同一队列中的诸作业可按先来先服务活着优先数等调度算法进入内存，各队列中的作业则按照某种方式相互搭配进入内存，以期达到更加理想的调度效果。（比如说每个队列各取一个）。

### 参考

* 《操作系统教程》 陈向群 杨芙清