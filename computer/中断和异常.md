## 中断和异常

### 中断

中断指的是外中断，指来自CPU执行指令意外的事件的发生，有**I/O结束中断**和**时钟中断**等，可以是外设请求或者人的干预。通常是强迫中断。

> 时钟中断：表示一个固定的时间片已到，让处理机处理计时、启动定时运行的任务等

这类中断通常是与当前指令执行无关的事件，即它们与当前处理机运行的程序无关。

## 异常

异常又称为内中断，指源于CPU执行指令内部的事件。异常不能被屏蔽。

> 可以是非法操作码、地址越界、算数溢出、虚存系统等缺页以及专门的陷入指令（访管指令，又称系统调用）引起的事件

可以是自愿中断（系统调用，指令中断）也可以是强迫中断（硬件故障、软件中断）。

### 中断处理等过程

1. 关中断
2. 保存断点（程序计数器PC的值保存）
3. 中断服务器寻址（取出中断服务程序的地址送入PC）
4. 保存现场和屏蔽字（中断程序开始执行，保存程序状态字寄存器PSWR和某些通用寄存器）
5. 开中断
6. 执行中断服务程序
7. 关中断
8. 恢复现场和屏蔽字
9. 开中断、中断返回

其中1-3是cpu进入中断周期后，由硬件自动完成

4-9是中断服务程序完成

### 中断在计算机中

中断系统是计算机实现中断功能的软硬件总称。一般在CPU中设置中断机构，在外设接口中设置中断控制器，在软件上设置相应的中断服务程序。**中断响应时间，是指从发出中断请求到开始进入中断服务程序所需要的时间。**

也就是上述步骤的1——3步骤所需要的时间。